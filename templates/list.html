{% extends "base.html" %}
{% block content %}

<h2>Visitantes Registrados</h2>

<!-- Recuadro de visitantes dentro -->
<div style="
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    background-color: #4CAF50;
    color: white;
    font-weight: bold;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
">
    Visitantes dentro: {{ inside_count }}
</div>

<table style="margin-top:60px; width:100%; border-collapse: collapse;">
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Empresa</th>
        <th>Motivo</th>
        <th>Entrada</th>
        <th>Salida</th>
        <th>Acciones</th>
    </tr>

    {% for v in visitors %}
    <tr>
        <td>{{ v.id }}</td>
        <td>{{ v.name }}</td>
        <td>{{ v.company }}</td>
        <td>{{ v.reason }}</td>
        <td>{{ v.check_in.strftime("%Y-%m-%d %H:%M:%S") }}</td>
        <td>
            {% if v.check_out %}
                {{ v.check_out.strftime("%Y-%m-%d %H:%M:%S") }}
            {% else %}
                ---
            {% endif %}
        </td>
        <td>
            {% if not v.check_out %}
                <a href="{{ url_for('checkout', visitor_id=v.id) }}">
                    <button>Dar salida</button>
                </a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}

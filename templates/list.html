{% extends "base.html" %}
{% block content %}
<h2>Visitantes Registrados</h2>

<div style="margin-bottom: 20px;">
    <strong>Actualmente dentro:</strong> {{ inside_count }}
</div>

<table style="width:100%;">
    <thead>
        <tr>
            <th>ID</th>
            <th>Cédula</th>
            <th>Nombre</th>
            <th>Empresa</th>
            <th>Persona a visitar</th>
            <th>Motivo</th>
            <th>Entrada</th>
            <th>Salida</th>
            <th>Acción</th>
        </tr>
    </thead>
    <tbody>
        {% for v in visitors %}
        <tr>
            <td>{{ v.id }}</td>
            <td>{{ v.ci }}</td>
            <td>{{ v.name }}</td>
            <td>{{ v.company or '---' }}</td>
            <td>{{ v.person_to_visit }}</td>
            <td>{{ v.reason or '---' }}</td>
            <td>{{ v.check_in.strftime("%Y-%m-%d %H:%M:%S") }}</td>
            <td>{% if v.check_out %}{{ v.check_out.strftime("%Y-%m-%d %H:%M:%S") }}{% else %}---{% endif %}</td>
            <td>
                {% if not v.check_out %}
                <a href="{{ url_for('checkout', visitor_id=v.id) }}">Dar salida</a>
                {% else %}
                ---
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
